package pkg

import (
	"slices"
	"testing"

	"github.com/stretchr/testify/require"
)

// hint: find pkg | entr -n -r -cc -s "go test -v -bench=. ./pkg/"

func BenchmarkHashMap(b *testing.B) {
	array := [1024]string{"victor", "alpha", "juliet", "juliet", "yankee", "uniform", "victor", "november", "kilo", "mike", "papa", "yankee", "charlie", "hotel", "kilo", "india", "whiskey", "yankee", "xray", "papa", "uniform", "november", "mike", "xray", "sierra", "golf", "bravo", "india", "whiskey", "xray", "charlie", "bravo", "zulu", "juliet", "yankee", "november", "romeo", "charlie", "papa", "charlie", "november", "foxtrot", "sierra", "mike", "november", "whiskey", "sierra", "tango", "romeo", "yankee", "alpha", "sierra", "victor", "romeo", "juliet", "delta", "xray", "xray", "lima", "oscar", "whiskey", "charlie", "alpha", "papa", "alpha", "mike", "sierra", "mike", "foxtrot", "golf", "victor", "kilo", "alpha", "kilo", "yankee", "kilo", "xray", "november", "charlie", "kilo", "charlie", "bravo", "xray", "sierra", "zulu", "tango", "oscar", "alpha", "echo", "kilo", "echo", "india", "uniform", "yankee", "mike", "echo", "juliet", "echo", "golf", "mike", "echo", "bravo", "foxtrot", "delta", "delta", "bravo", "india", "india", "quebec", "romeo", "romeo", "victor", "golf", "november", "hotel", "zulu", "yankee", "hotel", "november", "romeo", "victor", "lima", "victor", "victor", "delta", "papa", "whiskey", "xray", "papa", "delta", "papa", "mike", "quebec", "oscar", "hotel", "whiskey", "yankee", "alpha", "lima", "victor", "papa", "hotel", "victor", "echo", "november", "charlie", "quebec", "charlie", "whiskey", "bravo", "india", "yankee", "delta", "tango", "november", "xray", "tango", "echo", "papa", "juliet", "foxtrot", "zulu", "juliet", "charlie", "papa", "india", "kilo", "india", "delta", "lima", "tango", "uniform", "xray", "papa", "bravo", "kilo", "yankee", "bravo", "echo", "quebec", "tango", "bravo", "lima", "xray", "bravo", "kilo", "zulu", "victor", "charlie", "hotel", "sierra", "juliet", "golf", "sierra", "golf", "romeo", "sierra", "delta", "tango", "delta", "quebec", "india", "sierra", "hotel", "delta", "lima", "uniform", "november", "alpha", "november", "charlie", "victor", "foxtrot", "charlie", "xray", "delta", "romeo", "kilo", "delta", "whiskey", "bravo", "bravo", "romeo", "quebec", "mike", "juliet", "lima", "yankee", "india", "foxtrot", "delta", "hotel", "bravo", "bravo", "xray", "golf", "foxtrot", "quebec", "india", "victor", "alpha", "tango", "yankee", "mike", "whiskey", "uniform", "oscar", "mike", "hotel", "zulu", "xray", "sierra", "victor", "xray", "zulu", "india", "india", "xray", "kilo", "golf", "echo", "zulu", "sierra", "zulu", "alpha", "india", "foxtrot", "hotel", "victor", "hotel", "lima", "hotel", "bravo", "kilo", "foxtrot", "echo", "india", "india", "mike", "yankee", "kilo", "victor", "uniform", "whiskey", "kilo", "alpha", "november", "tango", "delta", "delta", "tango", "victor", "golf", "alpha", "bravo", "romeo", "echo", "sierra", "kilo", "alpha", "yankee", "foxtrot", "uniform", "november", "india", "india", "papa", "echo", "xray", "charlie", "foxtrot", "oscar", "mike", "lima", "november", "victor", "november", "tango", "uniform", "sierra", "foxtrot", "tango", "victor", "mike", "bravo", "sierra", "lima", "whiskey", "xray", "golf", "papa", "echo", "yankee", "bravo", "charlie", "hotel", "zulu", "echo", "echo", "november", "bravo", "india", "kilo", "charlie", "mike", "romeo", "bravo", "tango", "lima", "delta", "whiskey", "zulu", "bravo", "delta", "mike", "november", "papa", "charlie", "quebec", "lima", "quebec", "delta", "yankee", "papa", "india", "echo", "whiskey", "mike", "uniform", "papa", "quebec", "oscar", "zulu", "hotel", "alpha", "zulu", "november", "delta", "delta", "delta", "mike", "delta", "uniform", "november", "xray", "echo", "romeo", "romeo", "juliet", "whiskey", "zulu", "foxtrot", "xray", "victor", "quebec", "india", "papa", "romeo", "echo", "whiskey", "juliet", "sierra", "zulu", "uniform", "hotel", "bravo", "romeo", "quebec", "lima", "charlie", "victor", "quebec", "uniform", "mike", "whiskey", "alpha", "mike", "zulu", "india", "uniform", "sierra", "alpha", "november", "india", "quebec", "charlie", "zulu", "whiskey", "romeo", "zulu", "foxtrot", "golf", "uniform", "uniform", "alpha", "india", "uniform", "mike", "lima", "hotel", "quebec", "xray", "uniform", "golf", "delta", "romeo", "bravo", "zulu", "oscar", "juliet", "quebec", "golf", "lima", "juliet", "sierra", "charlie", "yankee", "juliet", "xray", "yankee", "victor", "charlie", "bravo", "charlie", "mike", "kilo", "papa", "foxtrot", "alpha", "echo", "india", "sierra", "whiskey", "bravo", "yankee", "tango", "tango", "india", "bravo", "charlie", "romeo", "victor", "november", "bravo", "india", "golf", "mike", "uniform", "foxtrot", "yankee", "uniform", "yankee", "delta", "oscar", "tango", "india", "papa", "papa", "whiskey", "whiskey", "alpha", "zulu", "kilo", "golf", "juliet", "mike", "kilo", "victor", "charlie", "alpha", "echo", "kilo", "echo", "oscar", "oscar", "quebec", "uniform", "golf", "oscar", "romeo", "echo", "foxtrot", "india", "oscar", "juliet", "papa", "sierra", "oscar", "alpha", "november", "november", "whiskey", "mike", "bravo", "india", "papa", "whiskey", "papa", "lima", "hotel", "mike", "papa", "bravo", "zulu", "uniform", "india", "hotel", "quebec", "tango", "mike", "victor", "papa", "charlie", "uniform", "oscar", "papa", "uniform", "foxtrot", "delta", "mike", "yankee", "whiskey", "whiskey", "victor", "mike", "uniform", "tango", "oscar", "echo", "golf", "lima", "echo", "whiskey", "tango", "india", "zulu", "india", "zulu", "delta", "delta", "yankee", "golf", "alpha", "mike", "delta", "kilo", "victor", "bravo", "kilo", "quebec", "india", "november", "uniform", "golf", "papa", "yankee", "zulu", "golf", "hotel", "hotel", "yankee", "bravo", "foxtrot", "zulu", "bravo", "zulu", "lima", "xray", "kilo", "delta", "whiskey", "romeo", "zulu", "bravo", "tango", "romeo", "alpha", "golf", "quebec", "uniform", "papa", "quebec", "golf", "xray", "india", "delta", "echo", "xray", "oscar", "golf", "sierra", "sierra", "xray", "hotel", "oscar", "romeo", "bravo", "juliet", "victor", "charlie", "zulu", "golf", "delta", "alpha", "kilo", "yankee", "zulu", "india", "victor", "foxtrot", "uniform", "delta", "whiskey", "papa", "lima", "charlie", "golf", "romeo", "golf", "uniform", "hotel", "foxtrot", "xray", "victor", "whiskey", "mike", "foxtrot", "echo", "delta", "bravo", "xray", "lima", "echo", "yankee", "echo", "whiskey", "quebec", "delta", "india", "foxtrot", "romeo", "papa", "oscar", "whiskey", "india", "echo", "oscar", "victor", "charlie", "tango", "romeo", "zulu", "victor", "kilo", "india", "alpha", "delta", "november", "uniform", "uniform", "papa", "bravo", "charlie", "india", "juliet", "foxtrot", "zulu", "oscar", "golf", "sierra", "juliet", "golf", "alpha", "xray", "whiskey", "juliet", "golf", "tango", "juliet", "delta", "xray", "golf", "sierra", "charlie", "xray", "papa", "bravo", "golf", "november", "juliet", "juliet", "alpha", "victor", "india", "november", "victor", "charlie", "echo", "yankee", "delta", "tango", "uniform", "bravo", "sierra", "zulu", "xray", "quebec", "mike", "tango", "alpha", "oscar", "whiskey", "quebec", "quebec", "golf", "kilo", "uniform", "quebec", "echo", "papa", "charlie", "xray", "alpha", "tango", "tango", "juliet", "charlie", "india", "echo", "sierra", "november", "papa", "sierra", "quebec", "november", "quebec", "alpha", "oscar", "oscar", "zulu", "mike", "yankee", "lima", "delta", "whiskey", "papa", "uniform", "whiskey", "lima", "xray", "xray", "golf", "tango", "bravo", "kilo", "victor", "lima", "zulu", "sierra", "quebec", "hotel", "sierra", "kilo", "november", "charlie", "romeo", "bravo", "foxtrot", "xray", "papa", "lima", "romeo", "papa", "golf", "kilo", "xray", "oscar", "foxtrot", "india", "alpha", "quebec", "sierra", "victor", "mike", "whiskey", "oscar", "uniform", "xray", "sierra", "foxtrot", "india", "delta", "november", "sierra", "juliet", "alpha", "bravo", "hotel", "yankee", "kilo", "yankee", "papa", "mike", "papa", "oscar", "juliet", "kilo", "golf", "romeo", "november", "romeo", "quebec", "juliet", "kilo", "romeo", "charlie", "yankee", "uniform", "quebec", "hotel", "alpha", "uniform", "foxtrot", "delta", "india", "delta", "kilo", "zulu", "india", "kilo", "bravo", "bravo", "zulu", "bravo", "mike", "india", "romeo", "victor", "whiskey", "papa", "juliet", "papa", "juliet", "november", "oscar", "xray", "zulu", "victor", "juliet", "hotel", "kilo", "papa", "hotel", "lima", "tango", "lima", "zulu", "xray", "mike", "golf", "zulu", "yankee", "zulu", "india", "romeo", "yankee", "papa", "alpha", "alpha", "papa", "bravo", "quebec", "bravo", "sierra", "papa", "juliet", "mike", "oscar", "november", "romeo", "yankee", "delta", "lima", "victor", "romeo", "hotel", "zulu", "mike", "whiskey", "lima", "whiskey", "charlie", "quebec", "yankee", "lima", "kilo", "delta", "november", "yankee", "delta", "november", "alpha", "foxtrot", "lima", "sierra", "india", "charlie", "foxtrot", "kilo", "xray", "uniform", "mike", "echo", "november", "romeo", "hotel", "tango", "india", "whiskey", "xray", "uniform", "quebec", "zulu", "lima", "echo", "alpha", "quebec", "quebec", "sierra", "kilo", "foxtrot", "sierra", "papa", "xray", "bravo", "india", "juliet", "golf", "uniform", "kilo", "lima", "oscar", "yankee", "november", "tango", "oscar", "echo", "oscar", "oscar", "delta", "whiskey", "yankee", "foxtrot", "golf", "alpha", "hotel", "golf", "mike", "sierra", "juliet", "tango", "mike", "india", "whiskey", "kilo", "hotel", "xray", "charlie", "golf", "india", "oscar", "quebec", "tango", "zulu", "kilo", "yankee", "hotel", "zulu", "alpha", "xray", "lima", "india", "xray", "juliet"}

	b.Run("EasyCountOccurrencesOfString", func(b *testing.B) {
		deduplicatedArray := EasyCountOccurrencesOfString(array)
		slices.SortFunc(deduplicatedArray, func(a EasyItem, b EasyItem) int {
			if a.Key < b.Key {
				return -1
			} else if a.Key > b.Key {
				return 1
			} else {
				return 0
			}
		})

		require.Equal(
			b,
			[]EasyItem{{Key: "alpha", Value: 39}, {Key: "bravo", Value: 47}, {Key: "charlie", Value: 38}, {Key: "delta", Value: 45}, {Key: "echo", Value: 35}, {Key: "foxtrot", Value: 32}, {Key: "golf", Value: 40}, {Key: "hotel", Value: 32}, {Key: "india", Value: 54}, {Key: "juliet", Value: 34}, {Key: "kilo", Value: 42}, {Key: "lima", Value: 33}, {Key: "mike", Value: 42}, {Key: "november", Value: 39}, {Key: "oscar", Value: 33}, {Key: "papa", Value: 46}, {Key: "quebec", Value: 38}, {Key: "romeo", Value: 35}, {Key: "sierra", Value: 37}, {Key: "tango", Value: 32}, {Key: "uniform", Value: 40}, {Key: "victor", Value: 39}, {Key: "whiskey", Value: 41}, {Key: "xray", Value: 46}, {Key: "yankee", Value: 41}, {Key: "zulu", Value: 44}},
			deduplicatedArray,
		)

		for b.Loop() {
			_ = EasyCountOccurrencesOfString(array)
		}
	})

	b.Run("HardCountOccurrencesOfString", func(b *testing.B) {
		deduplicatedArray := HardCountOccurrencesOfString(array)
		slices.SortFunc(deduplicatedArray, func(a HardItem, b HardItem) int {
			if a.Key < b.Key {
				return -1
			} else if a.Key > b.Key {
				return 1
			} else {
				return 0
			}
		})

		require.Equal(
			b,
			[]HardItem{{Key: "alpha", Value: 39}, {Key: "bravo", Value: 47}, {Key: "charlie", Value: 38}, {Key: "delta", Value: 45}, {Key: "echo", Value: 35}, {Key: "foxtrot", Value: 32}, {Key: "golf", Value: 40}, {Key: "hotel", Value: 32}, {Key: "india", Value: 54}, {Key: "juliet", Value: 34}, {Key: "kilo", Value: 42}, {Key: "lima", Value: 33}, {Key: "mike", Value: 42}, {Key: "november", Value: 39}, {Key: "oscar", Value: 33}, {Key: "papa", Value: 46}, {Key: "quebec", Value: 38}, {Key: "romeo", Value: 35}, {Key: "sierra", Value: 37}, {Key: "tango", Value: 32}, {Key: "uniform", Value: 40}, {Key: "victor", Value: 39}, {Key: "whiskey", Value: 41}, {Key: "xray", Value: 46}, {Key: "yankee", Value: 41}, {Key: "zulu", Value: 44}},
			deduplicatedArray,
		)

		for b.Loop() {
			_ = HardCountOccurrencesOfString(array)
		}
	})
}
